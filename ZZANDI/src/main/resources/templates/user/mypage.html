<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">


<head th:replace="layout/head.html :: head">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.css" integrity="sha512-vmXqikRa5kmI3gOQygzml5nV+5NGxG8rt8KWHKj8JYYK12JUl2L8RBfWinFGTzvpwwsIRcINy9mhLyodnmzjig==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
<section th:replace="layout/header.html :: header"></section>

<div class = "container">
    <div th:if = "${user.id == currentUser.id}">
        <div class="border-bottom my-3 py-2 w-50">대기 중인 스터디 목록</div>
        <div class = "card my-3 w-50" th:each="teamMate : ${teamMateList}" th:if = "${teamMate.teamMateStatus.name() == 'WAITING'}">
            <div class = "card-body">
                <a th:href = "@{|/study/detail/${teamMate.study.id}|}">
                    <span th:text = "${teamMate.study.studyTitle}"></span>
                    <span th:text = "${teamMate.study.studyStart}"></span>
                    <span th:text = "${teamMate.study.studyTag}"></span>
                    <span th:text = "${teamMate.study.studyStatus}"></span>
                </a>
                <form th:action="@{|/${teamMate.study.id}/teamMate/delete/${teamMate.id}|}" method="post" style="display: inline;">
                    <button type="submit" onclick = "if (!confirm('참가 신청을 취소하시겠습니까?')) return false;" class = "btn btn-outline-secondary">취소</button>
                </form>
            </div>
        </div>
    </div>
    <div class="border-bottom my-3 py-2 w-50">모집 중인 스터디 목록</div>
    <div class = "card my-3 w-50" th:each="teamMate : ${teamMateList}" th:if = "${teamMate.study.studyStatus.name() == 'RECRUIT'} and ${teamMate.getUser == teamMate.study.user}">
        <div class = "card-body">
            <a th:href = "@{|/study/detail/${teamMate.study.id}|}">
                <span th:text = "${teamMate.study.studyTitle}"></span>
                <span th:text = "${teamMate.study.studyStart}"></span>
                <span th:text = "${teamMate.study.studyTag}"></span>
                <span th:text = "${teamMate.study.studyStatus}"></span>
            </a>
        </div>
    </div>
    <div class="border-bottom my-3 py-2 w-50">진행 중인 스터디 목록</div>
    <div class = "card my-3 w-50" th:each="teamMate : ${teamMateList}" th:if = "${teamMate.study.studyStatus.name() == 'PROGRESS'} or ${teamMate.teamMateStatus.name() == 'ACCEPTED'}">
        <div class = "card-body">
            <a th:href = "@{|/study/detail/${teamMate.study.id}|}">
                <span th:text = "${teamMate.study.studyTitle}"></span>
                <span th:text = "${teamMate.study.studyStart}"></span>
                <span th:text = "${teamMate.study.studyTag}"></span>
                <span th:text = "${teamMate.study.studyStatus}"></span>
            </a>
        </div>
    </div>

    <div class="border-bottom my-3 py-2 w-50">완료한 스터디 목록</div>
    <div class = "card my-3 w-50" th:each="teamMate : ${teamMateList}" th:if = "${teamMate.study.studyStatus.name()  == 'COMPLETE'}">
        <div class = "card-body">
            <a th:href = "@{|/study/detail/${teamMate.study.id}|}">
                <span th:text = "${teamMate.study.studyTitle}"></span>
                <span th:text = "${teamMate.study.studyStart}"></span>
                <span th:text = "${teamMate.study.studyTag}"></span>
                <span th:text = "${teamMate.study.studyStatus}"></span>
            </a>
        </div>
    </div>
</div>

</body>
</html>